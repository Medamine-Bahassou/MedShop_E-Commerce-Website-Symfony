{% extends 'base.html.twig' %}

{% block title %} {{product.name}} {% endblock %}

{% block body %}
<div class="container">
<div class="row">
    <div class="col-md-12">
        <div class="my-5 d-flex justify-content-between align-items-center">
            
              
              
          </div>
          <div class="row">
            {% if product %}
                  <div class="col-md-8">
                    <div class="card" >
                        {% if product.image %}
                        <img src="{{asset('uploads/'~product.image)}}" 
                        alt="{{product.name}}"
                        height="400"
                        width="600"
                        class="card-img-top">
                        {%else%}
                            <img src="{{asset('uploads/None.png')}}" 
                            alt="{{product.name}}"
                            height="400"
                            width="600"    
                            class="card-img-top">
                        {% endif %}
                        
                    </div>
                  </div>
                  <div class="col-md-4">
                    {%for message in app.flashes("warning")%}
                        <div class="alert alert-warning">
                            {{message}}
                        </div>
                    {%endfor%}        
                    <div class="card">
                        <div class="card-body">
                            <h5 class="card-title">
                                {{product.name}}
                            </h5>
                            <p class="card-text">
                                {{product.description}}
                            </p>
                            <h5><span class="text text-danger">{{product.price}}DH</span></h5>
                            <h5><span class="text text-success">{{product.category.name}}</span></h5>
                            
                            
                            <form id="form" method="post" action="{{path('order_store',{productid: product.id})}}" class="">
                                <input type="hidden" class="form form-control my-2" name="quantity"  value="1"  min="1" max="{{product.quantity}}">
                                <div class="bg d-flex justify-content-between align-items-center w-50 my-2">
                                    <button type="button" class="btn btn-secondary float-end" onclick="inc('dec','{{product.quantity}}')" style="width:40px;">-</button>
                                    <div id="quantityDiv" name="quantity" >1</div>
                                    <button type="button" class="btn btn-secondary float-start" onclick="inc('inc','{{product.quantity}}')" style="width:40px;">+</button>
                                </div>
                                <input type="submit" value="Order Now" class="btn btn-sm btn-outline-dark mx-1" onclick="submitForm()">
                            </form>    
                            
                            <script>
                                function inc(tt, max) {
                                    var t = parseInt(document.getElementById('quantityDiv').innerHTML); 
                                    if (tt === "inc" && t >= 1 && t < max) {
                                        t++; 
                                        document.getElementById('quantityDiv').innerHTML = t;
                                    }
                                    if (tt === "dec" && t > 1) {
                                        t--; 
                                        document.getElementById('quantityDiv').innerHTML = t; 
                                    }
                                }
                            
                                function submitForm() {
                                    var inputQuantity = parseInt(document.getElementById('quantityDiv').innerHTML);
                                    document.getElementsByName('quantity')[0].value = inputQuantity; 
                                    document.getElementById('form').submit(); 
                                }
                            </script>                       
                            



                        </div>
                    </div>
                  </div>
            {%else%}
                  <div class="alert alert-info">
                    No product found!
                  </div>
            {%endif%}
          </div>
    </div>
</div>
</div>

<!--  -->


{% endblock %}
